http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

        <!-- Change DB by comment/uncomment property-placeholder -->

<context:property-placeholder location="classpath:db/postgres.properties" system-properties-mode="OVERRIDE"/>
        <!--    <context:property-placeholder location="classpath:db/hsqldb.properties" system-properties-mode="OVERRIDE"/>-->

        <!--
            For postgres driver logging
            It uses java.util.logging and logged via jul-to-slf4j bridge
            https://stackoverflow.com/a/27296470/548473
        -->
<bean class="org.springframework.beans.factory.config.MethodInvokingBean">
<property name="staticMethod" value="org.slf4j.bridge.SLF4JBridgeHandler.install"/>
</bean>

<context:component-scan base-package="ru.javawebinar.**.repository.jpa"/>

<jdbc:initialize-database data-source="dataSource" enabled="${database.init}">

<jdbc:script encoding="utf-8" location="classpath:db/populateDB.sql"/>
</jdbc:initialize-database>

        <!--no pooling-->
<bean id="dataSource"
      class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="${database.driverClassName}"/>
<property name="url" value="${database.url}"/>
<property name="username" value="${database.username}"/>
<property name="password" value="${database.password}"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
      p:dataSource-ref="dataSource"
      p:packagesToScan="ru.javawebinar.**.model">

<constructor-arg ref="jdbcTemplate"/>
</bean>
        -->

<beans profile="hsqldb">
<context:property-placeholder location="classpath:db/hsqldb.properties" system-properties-mode="OVERRIDE"/>

<!--no pooling-->
<bean id="dataSource"
      class="org.springframework.jdbc.datasource.DriverManagerDataSource"
      p:driverClassName="org.hsqldb.jdbcDriver"
      p:url="${database.url}"
      p:username="${database.username}"
      p:password="${database.password}"/>
</beans>

<beans profile="postgres">
<!--
    For postgres driver logging
    It uses java.util.logging and logged via jul-to-slf4j bridge
    https://stackoverflow.com/a/27296470/548473
-->
<bean class="org.springframework.beans.factory.config.MethodInvokingBean">
    <property name="staticMethod" value="org.slf4j.bridge.SLF4JBridgeHandler.install"/>
</bean>

<context:property-placeholder location="classpath:db/postgres.properties" system-properties-mode="OVERRIDE"/>

<bean id="dataSource"
      class="org.apache.tomcat.jdbc.pool.DataSource"
      p:driverClassName="org.postgresql.Driver"
      p:url="${database.url}"
      p:username="${database.username}"
      p:password="${database.password}"/>
</beans>
        </beans>
